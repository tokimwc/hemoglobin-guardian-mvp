# ヘモグロビンガーディアン 開発引き継ぎ書

## 1. 最近の主な改善点

### 1.1 画像解析機能の強化
- Vision AIを使用した爪領域の検出機能を追加
- 画像品質メトリクス（ブレ、明るさ、爪の検出）の実装
- 解析結果の信頼度スコアの計算ロジックを追加

### 1.2 アドバイス生成の改善
- Gemini APIを使用した構造化された栄養アドバイスの生成
- 鉄分豊富な食材、食事メニュー、生活習慣のカテゴリ分け
- 画像品質に基づく警告メッセージの統合
- エラー時のフォールバックメカニズムの実装

### 1.3 フロントエンドの更新
- 解析結果表示UIの改善（警告表示、信頼度表示）
- APIクライアントの例外処理の強化
- 履歴機能の実装

## 2. 現在の実装状況

### 2.1 バックエンド (`/backend`)
- FastAPI + Vision AI + Gemini API + Firestore
- 主要エンドポイント:
  - `POST /analyze`: 画像解析
  - `GET /history/{user_id}`: 解析履歴取得
- テストカバレッジ: Vision Service, Gemini Service

### 2.2 フロントエンド (`/frontend`)
- Flutter + Riverpod
- 主要機能:
  - カメラ/ギャラリーからの画像選択
  - 解析結果の表示
  - 履歴表示（実装中）

## 3. 次のステップ

### 3.1 優先度高
1. パフォーマンステストの実施
   - 画像解析の応答時間
   - 同時リクエスト処理
   - メモリ使用量

2. エンドツーエンドテストの追加
   - カメラ撮影〜解析結果表示
   - 履歴保存〜表示
   - エラーケース

3. デプロイメントパイプラインの整備
   - CI/CD設定
   - 環境変数管理
   - モニタリング設定

### 3.2 優先度中
1. ユーザー認証の実装
2. オフライン対応
3. 解析履歴の詳細表示

### 3.3 優先度低
1. 多言語対応
2. テーマカスタマイズ
3. プッシュ通知

## 4. 注意点・課題

### 4.1 技術的な注意点
- Vision AIの爪検出精度向上が必要
- Gemini APIの実際の呼び出し実装が必要（現在はモック）
- 画像品質チェックのパラメータ調整が必要

### 4.2 未解決の課題
- 低照度環境での解析精度
- 大規模データでのパフォーマンス
- エッジケースのエラーハンドリング

## 5. 環境情報

### 5.1 開発環境
- Python 3.9以上
- Flutter 3.x
- Node.js 18.x

### 5.2 必要な認証情報
- Google Cloud credentials
- Firebase設定
- Gemini API Key

## 6. 参考資料
- [API仕様書](/backend/docs/API.md)
- [アーキテクチャ図](/docs/architecture-diagram.png)
- [要件定義書](/docs/requirements.md) 